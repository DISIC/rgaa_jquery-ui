<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Composant Progressbar corrigé - JqueryUi - SGMAP</title>
	<link href="../../node_modules/bootstrap/dist/css/bootstrap.css" rel="stylesheet" />
	<link href="../../node_modules/jquery-ui/themes/base/all.css" rel="stylesheet" />
	<style>
		.ui-progressbar {
			position: relative;
		}
		.progress-label {
			position: absolute;
			left: 50%;
			top: 4px;
			font-weight: bold;
			text-shadow: 1px 1px 0 #fff;
		}
		*:focus {
			border : 2px solid red !important;
		}
		.navbar {
			background: #2868C9;
		}
	</style>
</head>
<body>
	<header role="banner">
		<nav class="navbar navbar-dark" >
			<div class="container">
				<div class="navbar-header">
					<a href="../index.html" class="navbar-brand">Accueil des tests JQuery-ui</a>
				</div>
			</div>
		</nav>
	</header>

	<div class="row">
		<div class="container">
			<h1>jQuery UI components</h1>

			<p class="alert alert-info">
				{
					"jquery": "^3.1.1",
					"jquery-ui": "^1.12.1"
				}
			</p>

			<!-- ProgressBar -->
			<h2 class="demoHeaders">ProgressBar (version corrigée)</h2>
			<p><a href="http://api.jqueryui.com/progressbar/">http://api.jqueryui.com/progressbar/</a></p>

			<p id="description-composant">Description du composant</p>

			<div id="progressbar">
				<div class="progress-label">waiting...</div>
			</div>

			<p><button id="progressbutton">Lancer la progression</button></p>

			<div id="region">Région mise a jour par la progressbar</div>

			<p>Du contenu avec un <a href="#">lien</a> après le composant</p>

		</div>
	</div>
	<script src="../../node_modules/jquery/dist/jquery.js"></script>
	<script src="../../node_modules/jquery-ui-dist/jquery-ui.min.js"></script>
	<script src="../../dist/rgaa_jquery-ui.js"></script>
	<script type="text/javascript">
		/* global jQuery:false */
		(function ($) {
			'use strict';

			var progressbar = $( '#progressbar');
			var progressLabel = $( '.progress-label' );
			var progressbutton = $( '#progressbutton' );

			progressbar.progressbar({
				value: false,
				ariaValuetextSuffix : '% suffix',
				ariaValuetextPrefix : 'prefix',
				region : $('#region'),
				labelledby : $('#description-composant'),
				change: function() {
					progressLabel.text( progressbar.progressbar( 'value' ) + '%' );
				},
				complete: function() {
					progressLabel.text( 'Terminé !' );
				}
			});

			function progress() {
				var val = progressbar.progressbar( 'value' ) || 0;

				progressbar.progressbar( 'value', val + 2 );

				if ( val < 99 ) {
					setTimeout( progress, 500 );
				}else{
					progressbutton.button('enable');
					progressbar.progressbar('value', 0);
				}
			}

			progressbutton.button({ label: 'Commencer' });
			progressbutton.click(function() {
				progressbutton.button('disable');
				progress();
			});

		}(jQuery));
	</script>
</body>
</html>
